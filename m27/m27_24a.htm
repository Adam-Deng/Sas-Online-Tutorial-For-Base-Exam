<html><!-- InstanceBegin template="/Templates/popup.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="../tut.js">
</SCRIPT>
<link rel="stylesheet" href="../tut.css">

<!-- InstanceBeginEditable name="title" --><TITLE>Processing a DATA Step That Creates One Observation per Header Record</TITLE><!-- InstanceEndEditable -->


<META http-equiv="Content-Type" content="text/html; charset=windows-1252">
</HEAD>
<body bgcolor="#FFFFF0" topmargin="0" leftmargin="0" onLoad="self.focus()">
<table width="85%" border="0" cellpadding="0" cellspacing="0" align="center">
  <tr valign="top"> 
    <td><br>
      <strong><font size="3" color="#003399"><!-- InstanceBeginEditable name="popup_title" -->Processing 
      a DATA Step That Creates One Observation per Header Record<!-- InstanceEndEditable --></font></strong> 
    </td>
</tr>
</table><p> 
<!-- InstanceBeginEditable name="contents" --> 
<table width="85%" border="0" cellpadding="0" cellspacing="0" align="center">
  <tr valign="top"> 
    <td> <p>This animation shows the processing of a DATA step that creates one 
        observation per header record using the raw data file <strong>Census</strong>.</p>
      <p align="center">Raw Data File Census 
      <table  border=1 align="center" cellpadding=0 cellspacing=0 bgcolor="#CCCCCC" frame=BOX rules=NONE title="Raw Data File">
        <thead>
          <tr> 
            <td align=CENTER bgcolor="#F7F7DE"><font  face="Courier New, Courier" size="2" color="#000000">1---+----10---+----</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">H&nbsp;321&nbsp;S.&nbsp;MAIN&nbsp;ST&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;MARY&nbsp;E&nbsp;&nbsp;&nbsp;&nbsp;21&nbsp;F</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;WILLIAM&nbsp;M&nbsp;23&nbsp;M&nbsp;</font></td>
          </tr>
          <tr> 
            <td align=LEFT bgcolor="#FFFFFF"><font  face="Courier New, Courier" size="2" color="#000000">P&nbsp;SUSAN&nbsp;K&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;F</font></td>
          </tr>
      </table>
      <ol>
        <li> The following program is submitted to SAS: 
          <pre><font color="#003399">data perm.people (drop=type);<br>   infile census end=last;<br>   retain Address;<br>   input type $1. @;<br>   if type='H' then do;<br>      if _n_ &gt; 1 then output;<br>      Total=0;<br>      input Address $3-17;<br>   end;<br>   else if type='P' then total+1;<br>   if last then output;<br>run;</font></pre>
          During the compile phase, the variable <code>type</code> is flagged 
          so that later it can be dropped. The value for <code>Address</code> 
          is retained. <br>
          <br>
        </li>
        <li>As the execution phase begins, <code>_N_</code> is <em>1</em> and 
          <code>last</code> is <em>0</em>. <br>
          <br>
        </li>
        <li>Now the value for <code>type</code> is read, the condition <code>type</code>='<em>H</em>' 
          is true, so the statements in the DO group execute. <br>
          <br>
        </li>
        <li>The condition <code>N </code>&gt; <em>1</em> is not true, so the OUTPUT 
          statement is not executed. However, <code>Total</code> is assigned the 
          value of <em>0</em> and the value for <code>Address</code> is read. 
          <br>
          <br>
        </li>
        <li>The END statement closes the DO group. The alternative condition expressed 
          in the ELSE statement is not checked because the first condition, <code>type</code>='<em>H</em>', 
          was true. <br>
          <br>
        </li>
        <li>The value of <code>last</code> is still <em>0</em>, so the OUTPUT 
          statement is not executed. The RUN statement passes control back to 
          the top of the DATA step. <br>
          <br>
        </li>
        <li>During the second iteration, the value of <code>type</code> is '<em>P</em>' 
          and <code>Total</code> is incremented by 1. Again, the value of <code>last</code> 
          is <em>0</em>, so control returns to the top of the DATA step. <br>
          <br>
        </li>
        <li>During the fifth iteration, the value of <code>type</code> is '<em>H</em>' 
          and <code>_N_</code> is greater than <em>1</em>, so the values for <code>Address</code> 
          and <code>Total</code> are written to the data set as the first observation.<br>
          <br>
        </li>
        <li>As the last record in the file is read, the variable <code>last</code> 
          is set to <em>1</em>. Now that the condition for <code>last</code> is 
          true, the values in the program data vector are written to the data 
          set as the final observation. </li>
      </ol>
      </td>
  </tr>
  </table>
   <!-- InstanceEndEditable -->
<center><table width="85%" border="0" cellpadding="0" cellspacing="0" align="center">   
  <tr valign="top"> 
    <td> 
      <p><br><center>
        <form name="form1" method="post" action="">
          <input type="button" name="Button" value="Close" onClick="JavaScript: self.close()">
        </form></center>
</td></tr></table>
    
  <!-- #BeginLibraryItem "/Library/nav_popup_bottom.lbi" --><center><table width="100%" cellspacing="0" cellpadding="0">
      <tr> 
        <td width="14"><img src="../navimages/linebox.gif" width="14" height="7" alt=""></td>
        <td><img src="../navimages/linegray.gif" width="100%" height="7" alt=""></td>
      </tr>
      <tr> 
        <td>&nbsp;</td>
        <td valign="top"> <center>
          <font size="1" color="gray" face="Verdana, Arial, Helvetica, Sans Serif"><a
	  class="copyrightlink" href="JavaScript: openOther('../copyrite.htm')"><font face="Arial, Helvetica, sans-serif">Copyright</font></a> 
          <font face="Arial, Helvetica, sans-serif">&copy; 2003 SAS Institute 
          Inc., Cary, NC, USA. All rights reserved.</font></font> <font face="Arial, Helvetica, sans-serif"><br>
            <font size="1" color="gray"><a class="copyrightlink" href="http://www.sas.com/Copyright.html" target="_blank">Terms 
            of Use &amp; Legal Information</a> | <a class="copyrightlink" href="http://www.sas.com/Privacy.html" target="_blank">Privacy 
            Statement</a></font> </font>
          </center>
          </td>
      </tr>
    </table></center>
    <p>&nbsp;</p>
<!-- #EndLibraryItem --></center>
    </body>
<!-- InstanceEnd --></html>